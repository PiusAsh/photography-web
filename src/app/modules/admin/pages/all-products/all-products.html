<div class="all-products-container">
  <!-- Header Section -->
  <div class="page-header border-bottom">
    <div class="header-content">
      <h1 class="page-title">

        All Products
      </h1>
      <p class="page-subtitle">Manage your photography products</p>
    </div>
    <div class="header-actions">
      <button class="btn-add-product" routerLink="/app/add-product">
        <i class="bi bi-plus-circle"></i>
        Add New Product
      </button>
    </div>
  </div>

  <!-- Search and Filters -->
  <div class="search-section">
    <div class="search-box">
      <i class="bi bi-search"></i>
      <input 
        type="text" 
        placeholder="Search products..." 
        [(ngModel)]="searchTerm"
        (keyup.enter)="onSearch()"
      >
      <button class="btn-search" (click)="onSearch()">
        <i class="bi bi-arrow-right"></i>
      </button>
    </div>
    <div class="stats">
      <span class="stat-item">
        <i class="bi bi-collection"></i>
        {{ totalCount }} Products
      </span>
      <span class="stat-item">
        <i class="bi bi-file-earmark-text"></i>
        Page {{ currentPage }} of {{ totalPages }}
      </span>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading">
    <div class="loading-spinner">
      <i class="bi bi-arrow-clockwise"></i>
    </div>
    <p>Loading products...</p>
  </div>

  <!-- Products List -->
  <div class="products-list" *ngIf="!loading && products.length > 0">
    <div class="product-item" *ngFor="let product of products">
      <div class="product-image">
        <img [src]="product.mainImage" [alt]="product.name">
        <div class="product-overlay">
          <button class="btn-edit" (click)="onEditProduct(product)">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn-delete" (click)="onDeleteProduct(product)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
      
      <div class="product-info">
        <div class="product-header">
          <h3 class="product-name">{{ product.name }}</h3>
          <div class="product-actions">
            <button class="btn-edit-small" (click)="onEditProduct(product)">
              <i class="bi bi-pencil"></i>
            </button>
            <button class="btn-delete-small" (click)="onDeleteProduct(product)">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </div>
        
        <p class="product-description">{{ product.description }}</p>
        
        <div class="product-details">
          <div class="detail-item">
            <i class="bi bi-calendar"></i>
            <span>{{ product.year }}</span>
          </div>
          <div class="detail-item">
            <i class="bi bi-currency-dollar"></i>
            <span>{{ getPriceRange(product) }}</span>
          </div>
          <div class="detail-item">
            <i class="bi bi-images"></i>
            <span>{{ product.images.length }} images</span>
          </div>
          <div class="detail-item">
            <i class="bi bi-clock"></i>
            <span>{{ formatDate(product.dateCreated) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && products.length === 0">
    <i class="bi bi-box"></i>
    <h3>No products found</h3>
    <p>Start by adding your first photography product</p>
    <!-- <button class="btn-add-product" routerLink="/app/add-product">
      <i class="bi bi-plus-circle"></i>
      Add Product
    </button> -->
  </div>

  <!-- Pagination -->
  <div class="pagination-section" *ngIf="totalPages > 1">
    <div class="pagination">
      <button 
        class="btn-page" 
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)"
      >
        <i class="bi bi-chevron-left"></i>
      </button>
      
      <button 
        class="btn-page" 
        *ngFor="let page of getPages()"
        [class.active]="page === currentPage"
        (click)="onPageChange(page)"
      >
        {{ page }}
      </button>
      
      <button 
        class="btn-page" 
        [disabled]="currentPage === totalPages"
        (click)="onPageChange(currentPage + 1)"
      >
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-overlay" *ngIf="showDeleteModal" (click)="cancelDelete()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Delete Product</h3>
        <button class="btn-close" (click)="cancelDelete()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <i class="bi bi-exclamation-triangle"></i>
        <p>Are you sure you want to delete <strong>"{{ selectedProduct?.name }}"</strong>?</p>
        <p class="warning-text">This action cannot be undone.</p>
      </div>
      
      <div class="modal-actions">
        <button class="btn-cancel" (click)="cancelDelete()">
          Cancel
        </button>
        <button class="btn-confirm-delete" (click)="confirmDelete()">
          <i class="bi bi-trash"></i>
          Delete Product
        </button>
      </div>
    </div>
  </div>
</div> 